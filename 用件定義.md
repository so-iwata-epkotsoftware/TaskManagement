### 用件定義（Requirements）

#### 目的
- ユーザーが自身のタスクを効率的に管理できるタスク管理アプリを構築します。アプリでは、ユーザーが自分のタスクのCRUD操作（作成・読み取り・更新・削除）を行えるとともに、全ユーザーのタスクの閲覧が可能で、管理者はタスクとユーザーの管理も行えるようにします。

#### 主な機能
##### ユーザー管理
- ユーザー登録: 新規ユーザーの登録が可能
  - 必須情報: ユーザー名、メールアドレス、パスワード
- ログイン/ログアウト: ユーザーは自分のアカウントでログイン・ログアウトが可能
- パスワードリセット: ユーザーは忘れたパスワードをリセットできる
- 役割分け: ユーザーには管理者（admin）または一般ユーザー（user）の役割を割り当て、アクセス権を制御

##### タスク管理
- タスクの作成: ユーザーは自分のタスクを新規作成できる
  - 必須情報: タイトル、説明、状態（未着手、進行中、完了）、期限、優先度、カテゴリー（任意）
- タスクの閲覧: 自分のタスクおよび他ユーザーのタスクを一覧で確認できる
- タスクの更新: 自分のタスクの内容（タイトル、状態、期限、優先度など）を更新できる
- タスクの削除: 自分のタスクを削除できる
- タスクの状態管理: タスクの進行状況を管理
  - 状態: 未着手、進行中、完了
- タスクの期限設定: タスクに期限を設定可能
- タスクの優先度設定: 高、中、低の3段階で優先度を設定可能
- タスクのカテゴリー設定: 任意でカテゴリーを設定（例: 開発、デザイン、調整など）
- タスク検索・フィルタリング: 状態、期限、優先度、カテゴリーに基づいてタスクを検索・フィルタリングできる

##### 管理者機能
- ユーザー管理: 管理者は全ユーザーの管理が可能
- ユーザー情報の閲覧、編集、削除
- ユーザーの役割（管理者/一般ユーザー）の変更
- 全タスク管理: 管理者は全ユーザーのタスクを閲覧・編集・削除できる
- ユーザーに紐づくタスクの管理
- タスク統計: ユーザーごとのタスク数、状態別タスク数（未着手、進行中、完了）の統計を表示
- タスクフィルター機能: 管理者はタスクを状態や期限、優先度でフィルタリングして表示できる

##### レスポンシブ対応
- アプリはPC・スマホ両方に対応したレスポンシブデザインを採用し、どのデバイスからでも快適に使用可能


#### 権限・アクセス制御（マルチログイン方式）
- 一般ユーザー（user）:
  - 自分のタスクのみ閲覧・作成・編集・削除が可能
  - 他ユーザーのタスクは閲覧のみ可能
  - 他ユーザーのタスクの編集・削除は不可

- 管理者ユーザー（admin）:
  - すべてのユーザーのタスクを閲覧・作成・編集・削除可能
  - 全ユーザーの管理（ユーザーの編集・削除・役割変更）可能
  - タスクの状態別統計を閲覧可能
  - 全タスクの管理が可能

###### ログイン構成
- 一般ユーザー：web ガードを使用（通常のユーザー認証）

- 管理者ユーザー：admin ガードを使用（管理者専用の認証ガード）

##### ログインURLを分離：
- 一般ユーザー：/login
- 管理者ユーザー：/admin/login
  
### インターフェース・画面設計
#### 管理画面

##### ログイン画面: 管理者専用のログインページ
- ダッシュボード: ユーザーとタスクの統計、管理者が見るための概要
- ユーザー一覧: ユーザー情報（名前、メールアドレス、役割）を一覧表示。編集・削除ボタンを提供
- タスク一覧: 全ユーザーのタスクを一覧表示。タスク状態別にフィルタリング可能。タスクの編集・削除ボタンを提供

##### ユーザー画面
- ログイン画面: ユーザー専用のログインページ
- ダッシュボード: 自分のタスクを管理、タスクの状態変更や新規タスクの作成ができる
- タスク一覧: 自分のタスクを一覧表示し、編集・削除ができる。タスク状態別にフィルタリング可能
- タスク詳細: タスクの詳細情報を閲覧・編集できる

### システム要件
#### フロントエンド:
- Vue.jsを使用したSPA（シングルページアプリケーション）
- Tailwind CSSを使用したレスポンシブデザイン
- Inertia.jsでサーバーサイドとフロントエンドの橋渡しを行う

#### バックエンド:
- Laravel（またはPHP）
- MySQL/PostgreSQL（RDBMS）
- Laravel SanctumまたはPassportによるAPI認証

### システムフロー
1. ユーザーがログイン後、ダッシュボードに遷移
2. 一般ユーザーは自分のタスク一覧にアクセスでき、タスクの作成・更新・削除が可能
3. 管理者はすべてのタスクとユーザーのデータにアクセスでき、適切な権限に基づき操作
4. ユーザーはタスクの状態（未着手、進行中、完了など）を更新できる
5. フロントエンドでタスクのフィルタリング・検索が可能
6. ユーザー・管理者のインターフェースはどのデバイスからもアクセス可能

### エラーハンドリング
- バリデーションエラー: ユーザーがフォームを送信する際に、必要なフィールドが欠けている場合、適切なエラーメッセージを表示
- 認証エラー: 認証されていないユーザーが管理者用ページや他ユーザーのタスクにアクセスした場合、エラーメッセージを表示
- 権限エラー: 一般ユーザーが他ユーザーのタスクを編集・削除しようとした場合、エラーメッセージを表示

### テスト項目
- ユーザー認証: 正しいメールアドレスとパスワードでログインできるか
- タスク管理: 自分のタスクの作成・更新・削除が正しく動作するか
- 権限管理: 管理者と一般ユーザーの役割に応じたアクセス制限が正しく機能するか
- エラーハンドリング: 必須フィールドが欠けている場合、適切なエラーメッセージが表示されるか
- レスポンシブデザイン: PC・スマホ両方の画面サイズで動作するか
